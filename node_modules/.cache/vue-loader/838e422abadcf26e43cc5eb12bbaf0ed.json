{"remainingRequest":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/src/views/Blog/components/BlogList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/src/views/Blog/components/BlogList.vue","mtime":1622901908806},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdlciBmcm9tICJAL2NvbXBvbmVudHMvUGFnZXIiOwppbXBvcnQgZmV0Y2hEYXRhIGZyb20gIkAvbWl4aW5zL2ZldGNoRGF0YS5qcyI7CmltcG9ydCB7IGdldEJsb2dzIH0gZnJvbSAiQC9hcGkvYmxvZy5qcyI7CmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICJAL3V0aWxzIjsKaW1wb3J0IG1haW5TY3JvbGwgZnJvbSAiQC9taXhpbnMvbWFpblNjcm9sbC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtmZXRjaERhdGEoe30pLCBtYWluU2Nyb2xsKCJtYWluQ29udGFpbmVyIildLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2VyLAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOiOt+WPlui3r+eUseS/oeaBrwogICAgcm91dGVJbmZvKCkgewogICAgICBjb25zdCBjYXRlZ29yeUlkID0gK3RoaXMuJHJvdXRlLnBhcmFtcy5jYXRlZ29yeUlkIHx8IC0xOwogICAgICBjb25zdCBwYWdlID0gK3RoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2UgfHwgMTsKICAgICAgY29uc3QgbGltaXQgPSArdGhpcy4kcm91dGUucXVlcnkubGltaXQgfHwgMTA7CiAgICAgIHJldHVybiB7CiAgICAgICAgY2F0ZWdvcnlJZCwKICAgICAgICBwYWdlLAogICAgICAgIGxpbWl0LAogICAgICB9OwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvcm1hdERhdGUsCiAgICBhc3luYyBmZXRjaERhdGEoKSB7CiAgICAgIHJldHVybiBhd2FpdCBnZXRCbG9ncygKICAgICAgICB0aGlzLnJvdXRlSW5mby5wYWdlLAogICAgICAgIHRoaXMucm91dGVJbmZvLmxpbWl0LAogICAgICAgIHRoaXMucm91dGVJbmZvLmNhdGVnb3J5SWQKICAgICAgKTsKICAgIH0sCiAgICBoYW5kbGVQYWdlQ2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgY29uc3QgcXVlcnkgPSB7CiAgICAgICAgcGFnZTogbmV3UGFnZSwKICAgICAgICBsaW1pdDogdGhpcy5yb3V0ZUluZm8ubGltaXQsCiAgICAgIH07CiAgICAgIC8vIOi3s+i9rOWIsCDlvZPliY3nmoTliIbnsbtpZCAg5b2T5YmN55qE6aG15a656YePICBuZXdQYWdl55qE6aG156CBCiAgICAgIGlmICh0aGlzLnJvdXRlSW5mby5jYXRlZ29yeUlkID09PSAtMSkgewogICAgICAgIC8vIOW9k+WJjeayoeacieWIhuexuwogICAgICAgIC8vIC9hcnRpY2xlP3BhZ2U9JHtuZXdQYWdlfSZsaW1pdD0ke3RoaXMucm91dGVJbmZvLmxpbWl0fQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJCbG9nIiwKICAgICAgICAgIHF1ZXJ5LAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIC9hcnRpY2xlL2NhdGUvJHt0aGlzLnJvdXRlSW5mby5jYXRlZ29yeUlkfT9wYWdlPSR7bmV3UGFnZX0mbGltaXQ9JHt0aGlzLnJvdXRlSW5mby5saW1pdH0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiQ2F0ZWdvcnlCbG9nIiwKICAgICAgICAgIHF1ZXJ5LAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGNhdGVnb3J5SWQ6IHRoaXMucm91dGVJbmZvLmNhdGVnb3J5SWQsCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGFzeW5jICRyb3V0ZSgpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICAvLyDmu5rliqjpq5jluqbkuLowCiAgICAgIHRoaXMuJHJlZnMubWFpbkNvbnRhaW5lci5zY3JvbGxUb3AgPSAwOwogICAgICB0aGlzLmRhdGEgPSBhd2FpdCB0aGlzLmZldGNoRGF0YSgpOwogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["BlogList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogList.vue","sourceRoot":"src/views/Blog/components","sourcesContent":["<template>\n  <div class=\"blog-list-container\" ref=\"mainContainer\" v-loading=\"isLoading\">\n    <ul>\n      <li v-for=\"item in data.rows\" :key=\"item.id\">\n        <div class=\"thumb\" v-if=\"item.thumb\">\n          <RouterLink\n            :to=\"{\n              name: 'BlogDetail',\n              params: {\n                id: item.id,\n              },\n            }\"\n          >\n            <img v-lazy=\"item.thumb\" :alt=\"item.title\" :title=\"item.title\" />\n          </RouterLink>\n        </div>\n        <div class=\"main\">\n          <RouterLink\n            :to=\"{\n              name: 'BlogDetail',\n              params: {\n                id: item.id,\n              },\n            }\"\n          >\n            <h2>{{ item.title }}</h2>\n          </RouterLink>\n          <div class=\"aside\">\n            <span>日期：{{ formatDate(item.createDate) }}</span>\n            <span>浏览：{{ item.scanNumber }}</span>\n            <span>评论：{{ item.commentNumber }}</span>\n            <RouterLink\n              :to=\"{\n                name: 'CategoryBlog',\n                params: {\n                  categoryId: item.category.id,\n                },\n              }\"\n            >\n              {{ item.category.name }}\n            </RouterLink>\n          </div>\n          <div class=\"desc\">\n            {{ item.description }}\n          </div>\n        </div>\n      </li>\n    </ul>\n    <!-- 分页放到这里 -->\n    <Pager\n      v-if=\"data.total\"\n      :current=\"routeInfo.page\"\n      :total=\"data.total\"\n      :limit=\"routeInfo.limit\"\n      :visibleNumber=\"10\"\n      @pageChange=\"handlePageChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport Pager from \"@/components/Pager\";\nimport fetchData from \"@/mixins/fetchData.js\";\nimport { getBlogs } from \"@/api/blog.js\";\nimport { formatDate } from \"@/utils\";\nimport mainScroll from \"@/mixins/mainScroll.js\";\nexport default {\n  mixins: [fetchData({}), mainScroll(\"mainContainer\")],\n  components: {\n    Pager,\n  },\n  computed: {\n    // 获取路由信息\n    routeInfo() {\n      const categoryId = +this.$route.params.categoryId || -1;\n      const page = +this.$route.query.page || 1;\n      const limit = +this.$route.query.limit || 10;\n      return {\n        categoryId,\n        page,\n        limit,\n      };\n    },\n  },\n  methods: {\n    formatDate,\n    async fetchData() {\n      return await getBlogs(\n        this.routeInfo.page,\n        this.routeInfo.limit,\n        this.routeInfo.categoryId\n      );\n    },\n    handlePageChange(newPage) {\n      const query = {\n        page: newPage,\n        limit: this.routeInfo.limit,\n      };\n      // 跳转到 当前的分类id  当前的页容量  newPage的页码\n      if (this.routeInfo.categoryId === -1) {\n        // 当前没有分类\n        // /article?page=${newPage}&limit=${this.routeInfo.limit}\n        this.$router.push({\n          name: \"Blog\",\n          query,\n        });\n      } else {\n        // /article/cate/${this.routeInfo.categoryId}?page=${newPage}&limit=${this.routeInfo.limit}\n        this.$router.push({\n          name: \"CategoryBlog\",\n          query,\n          params: {\n            categoryId: this.routeInfo.categoryId,\n          },\n        });\n      }\n    },\n  },\n  watch: {\n    async $route() {\n      this.isLoading = true;\n      // 滚动高度为0\n      this.$refs.mainContainer.scrollTop = 0;\n      this.data = await this.fetchData();\n      this.isLoading = false;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n@import \"~@/styles/var.less\";\n.blog-list-container {\n  line-height: 1.7;\n  position: relative;\n  padding: 20px;\n  overflow-y: scroll;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  scroll-behavior: smooth;\n  ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n}\nli {\n  display: flex;\n  padding: 15px 0;\n  border-bottom: 1px solid @gray;\n  .thumb {\n    flex: 0 0 auto;\n    margin-right: 15px;\n    img {\n      display: block;\n      max-width: 200px;\n      border-radius: 5px;\n    }\n  }\n  .main {\n    flex: 1 1 auto;\n    h2 {\n      margin: 0;\n    }\n  }\n  .aside {\n    font-size: 12px;\n    color: @gray;\n    span {\n      margin-right: 15px;\n    }\n  }\n  .desc {\n    margin: 15px 0;\n    font-size: 14px;\n  }\n}\n</style>\n"]}]}