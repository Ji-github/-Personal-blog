{"remainingRequest":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/thread-loader/dist/cjs.js!/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/babel-loader/lib/index.js!/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/src/views/Blog/components/BlogTOC.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/src/views/Blog/components/BlogTOC.vue","mtime":1622901908806},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBSaWdodExpc3QgZnJvbSAiLi9SaWdodExpc3QiOwppbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gIkAvdXRpbHMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgUmlnaHRMaXN0CiAgfSwKICBwcm9wczogewogICAgdG9jOiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZUFuY2hvcjogIiIKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOagueaNrnRvY+WxnuaAp+S7peWPimFjdGl2ZUFuY2hvcuW+l+WIsOW4puaciWlzU2VsZWN05bGe5oCn55qEdG9j5pWw57uECiAgICB0b2NXaXRoU2VsZWN0KCkgewogICAgICBjb25zdCBnZXRUT0MgPSAodG9jID0gW10pID0+IHsKICAgICAgICByZXR1cm4gdG9jLm1hcCh0ID0+ICh7IC4uLnQsCiAgICAgICAgICBpc1NlbGVjdDogdC5hbmNob3IgPT09IHRoaXMuYWN0aXZlQW5jaG9yLAogICAgICAgICAgY2hpbGRyZW46IGdldFRPQyh0LmNoaWxkcmVuKQogICAgICAgIH0pKTsKICAgICAgfTsKCiAgICAgIHJldHVybiBnZXRUT0ModGhpcy50b2MpOwogICAgfSwKCiAgICAvLyDmoLnmja50b2PlvpfliLDlroPku6zlr7nlupTnmoTlhYPntKDmlbDnu4QKICAgIGRvbXMoKSB7CiAgICAgIGNvbnN0IGRvbXMgPSBbXTsKCiAgICAgIGNvbnN0IGFkZFRvRG9tcyA9IHRvYyA9PiB7CiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRvYykgewogICAgICAgICAgZG9tcy5wdXNoKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuYW5jaG9yKSk7CgogICAgICAgICAgaWYgKHQuY2hpbGRyZW4gJiYgdC5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgICAgYWRkVG9Eb21zKHQuY2hpbGRyZW4pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGFkZFRvRG9tcyh0aGlzLnRvYyk7CiAgICAgIHJldHVybiBkb21zOwogICAgfQoKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5zZXRTZWxlY3REZWJvdW5jZSA9IGRlYm91bmNlKHRoaXMuc2V0U2VsZWN0LCA1MCk7CiAgICB0aGlzLiRidXMuJG9uKCJtYWluU2Nyb2xsIiwgdGhpcy5zZXRTZWxlY3REZWJvdW5jZSk7CiAgfSwKCiAgZGVzdHJveWVkKCkgewogICAgdGhpcy4kYnVzLiRvZmYoIm1haW5TY3JvbGwiLCB0aGlzLnNldFNlbGVjdERlYm91bmNlKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTZWxlY3QoaXRlbSkgewogICAgICBsb2NhdGlvbi5oYXNoID0gaXRlbS5hbmNob3I7CiAgICB9LAoKICAgIC8vIOiuvue9rmFjdGl2ZUFuY2hvcuS4uuato+ehrueahOWAvAogICAgc2V0U2VsZWN0KHNjcm9sbERvbSkgewogICAgICBpZiAoIXNjcm9sbERvbSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5hY3RpdmVBbmNob3IgPSAiIjsgLy8g55Sx5LqO5ZCO57ut6KaB6YeN5paw6K6+572u77yM5YWI5riF56m65LmL5YmN55qE54q25oCBCgogICAgICBjb25zdCByYW5nZSA9IDIwMDsKCiAgICAgIGZvciAoY29uc3QgZG9tIG9mIHRoaXMuZG9tcykgewogICAgICAgIC8vIOeci+S4gOS4i+W9k+WJjei/meS4qmRvbeWFg+e0oOaYr+S4jeaYr+W6lOivpeiiq+mAieS4rQogICAgICAgIGlmICghZG9tKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIOW+l+WIsOWFg+e0oOemu+inhuWPo+mhtumDqOeahOi3neemuwoKCiAgICAgICAgY29uc3QgdG9wID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDsKCiAgICAgICAgaWYgKHRvcCA+PSAwICYmIHRvcCA8PSByYW5nZSkgewogICAgICAgICAgLy8g5Zyo6KeE5a6a55qE6IyD5Zu05YaFCiAgICAgICAgICB0aGlzLmFjdGl2ZUFuY2hvciA9IGRvbS5pZDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKHRvcCA+IHJhbmdlKSB7CiAgICAgICAgICAvLyDlnKjop4TlrprnmoTojIPlm7TkuIvmlrkKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5Zyo6KeE5a6a55qE6IyD5Zu05LiK5pa5CiAgICAgICAgICB0aGlzLmFjdGl2ZUFuY2hvciA9IGRvbS5pZDsgLy8g5YWI5YGH6K6+6Ieq5bex5piv5r+A5rS755qE77yM54S25ZCO57un57ut55yL5ZCO6Z2iCiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"sources":["BlogTOC.vue"],"names":[],"mappings":";;;;;;;;AAQA,OAAA,SAAA,MAAA,aAAA;AACA,SAAA,QAAA,QAAA,SAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA;AADA,GADA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAJA;;AASA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAbA;;AAcA,EAAA,QAAA,EAAA;AACA;AACA,IAAA,aAAA,GAAA;AACA,YAAA,MAAA,GAAA,CAAA,GAAA,GAAA,EAAA,KAAA;AACA,eAAA,GAAA,CAAA,GAAA,CAAA,CAAA,KAAA,EACA,GAAA,CADA;AAEA,UAAA,QAAA,EAAA,CAAA,CAAA,MAAA,KAAA,KAAA,YAFA;AAGA,UAAA,QAAA,EAAA,MAAA,CAAA,CAAA,CAAA,QAAA;AAHA,SAAA,CAAA,CAAA;AAKA,OANA;;AAOA,aAAA,MAAA,CAAA,KAAA,GAAA,CAAA;AACA,KAXA;;AAYA;AACA,IAAA,IAAA,GAAA;AACA,YAAA,IAAA,GAAA,EAAA;;AACA,YAAA,SAAA,GAAA,GAAA,IAAA;AACA,aAAA,MAAA,CAAA,IAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,CAAA,CAAA,MAAA,CAAA;;AACA,cAAA,CAAA,CAAA,QAAA,IAAA,CAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,YAAA,SAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AACA;AACA;AACA,OAPA;;AAQA,MAAA,SAAA,CAAA,KAAA,GAAA,CAAA;AACA,aAAA,IAAA;AACA;;AAzBA,GAdA;;AAyCA,EAAA,OAAA,GAAA;AACA,SAAA,iBAAA,GAAA,QAAA,CAAA,KAAA,SAAA,EAAA,EAAA,CAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,YAAA,EAAA,KAAA,iBAAA;AACA,GA5CA;;AA6CA,EAAA,SAAA,GAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,YAAA,EAAA,KAAA,iBAAA;AACA,GA/CA;;AAgDA,EAAA,OAAA,EAAA;AACA,IAAA,YAAA,CAAA,IAAA,EAAA;AACA,MAAA,QAAA,CAAA,IAAA,GAAA,IAAA,CAAA,MAAA;AACA,KAHA;;AAIA;AACA,IAAA,SAAA,CAAA,SAAA,EAAA;AACA,UAAA,CAAA,SAAA,EAAA;AACA;AACA;;AACA,WAAA,YAAA,GAAA,EAAA,CAJA,CAIA;;AACA,YAAA,KAAA,GAAA,GAAA;;AACA,WAAA,MAAA,GAAA,IAAA,KAAA,IAAA,EAAA;AACA;AACA,YAAA,CAAA,GAAA,EAAA;AACA;AACA,SAJA,CAKA;;;AACA,cAAA,GAAA,GAAA,GAAA,CAAA,qBAAA,GAAA,GAAA;;AACA,YAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,KAAA,EAAA;AACA;AACA,eAAA,YAAA,GAAA,GAAA,CAAA,EAAA;AACA;AACA,SAJA,MAIA,IAAA,GAAA,GAAA,KAAA,EAAA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA,eAAA,YAAA,GAAA,GAAA,CAAA,EAAA,CAFA,CAEA;AACA;AACA;AACA;;AA9BA;AAhDA,CAAA","sourcesContent":["<template>\n  <div class=\"blog-toc-container\">\n    <h2>目录</h2>\n    <RightList :list=\"tocWithSelect\" @select=\"handleSelect\" />\n  </div>\n</template>\n\n<script>\nimport RightList from \"./RightList\";\nimport { debounce } from \"@/utils\";\nexport default {\n  components: {\n    RightList,\n  },\n  props: {\n    toc: {\n      type: Array,\n    },\n  },\n  data() {\n    return {\n      activeAnchor: \"\",\n    };\n  },\n  computed: {\n    // 根据toc属性以及activeAnchor得到带有isSelect属性的toc数组\n    tocWithSelect() {\n      const getTOC = (toc = []) => {\n        return toc.map((t) => ({\n          ...t,\n          isSelect: t.anchor === this.activeAnchor,\n          children: getTOC(t.children),\n        }));\n      };\n      return getTOC(this.toc);\n    },\n    // 根据toc得到它们对应的元素数组\n    doms() {\n      const doms = [];\n      const addToDoms = (toc) => {\n        for (const t of toc) {\n          doms.push(document.getElementById(t.anchor));\n          if (t.children && t.children.length) {\n            addToDoms(t.children);\n          }\n        }\n      };\n      addToDoms(this.toc);\n      return doms;\n    },\n  },\n  created() {\n    this.setSelectDebounce = debounce(this.setSelect, 50);\n    this.$bus.$on(\"mainScroll\", this.setSelectDebounce);\n  },\n  destroyed() {\n    this.$bus.$off(\"mainScroll\", this.setSelectDebounce);\n  },\n  methods: {\n    handleSelect(item) {\n      location.hash = item.anchor;\n    },\n    // 设置activeAnchor为正确的值\n    setSelect(scrollDom) {\n      if (!scrollDom) {\n        return;\n      }\n      this.activeAnchor = \"\"; // 由于后续要重新设置，先清空之前的状态\n      const range = 200;\n      for (const dom of this.doms) {\n        // 看一下当前这个dom元素是不是应该被选中\n        if (!dom) {\n          continue;\n        }\n        // 得到元素离视口顶部的距离\n        const top = dom.getBoundingClientRect().top;\n        if (top >= 0 && top <= range) {\n          // 在规定的范围内\n          this.activeAnchor = dom.id;\n          return;\n        } else if (top > range) {\n          // 在规定的范围下方\n          return;\n        } else {\n          // 在规定的范围上方\n          this.activeAnchor = dom.id; // 先假设自己是激活的，然后继续看后面\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.blog-toc-container {\n  h2 {\n    font-weight: bold;\n    letter-spacing: 2px;\n    font-size: 1em;\n    margin: 0;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/Blog/components"}]}