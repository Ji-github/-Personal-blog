{"remainingRequest":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/thread-loader/dist/cjs.js!/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/babel-loader/lib/index.js!/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/src/directives/lazy.js","dependencies":[{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/src/directives/lazy.js","mtime":1622901908735},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBldmVudEJ1cyBmcm9tICJAL2V2ZW50QnVzIjsKaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICJAL3V0aWxzIjsKaW1wb3J0IGRlZmF1bHRHaWYgZnJvbSAiQC9hc3NldHMvZGVmYXVsdC5naWYiOwpsZXQgaW1ncyA9IFtdOwoKZnVuY3Rpb24gc2V0SW1hZ2UoaW1nKSB7CiAgaW1nLmRvbS5zcmMgPSBkZWZhdWx0R2lmOyAvLyDlhYjmmoLml7bkvb/nlKjnnYDpu5jorqTlm77niYcKICAvLyDlpITnkIblm77niYcKICAvLyDor6Xlm77niYfmmK/lkKblnKjop4blj6PojIPlm7TlhoUKCiAgY29uc3QgY2xpZW50SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKICBjb25zdCByZWN0ID0gaW1nLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICBjb25zdCBoZWlnaHQgPSByZWN0LmhlaWdodCB8fCAxNTA7CgogIGlmIChyZWN0LnRvcCA+PSAtaGVpZ2h0ICYmIHJlY3QudG9wIDw9IGNsaWVudEhlaWdodCkgewogICAgLy8g5Zyo6KeG5Y+j6IyD5Zu05YaFCiAgICAvLyBjb25zdCB0ZW1wSW1nID0gbmV3IEltYWdlKCk7CiAgICAvLyB0ZW1wSW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgLy8gICAvLyDlvZPnnJ/lrp7lm77niYfliqDovb3lrozmiJDkuYvlkI4KICAgIC8vICAgaW1nLmRvbS5zcmMgPSBpbWcuc3JjOwogICAgLy8gfTsKICAgIC8vIHRlbXBJbWcuc3JjID0gaW1nLnNyYzsKICAgIGltZy5kb20uc3JjID0gaW1nLnNyYzsKICAgIGltZ3MgPSBpbWdzLmZpbHRlcihpID0+IGkgIT09IGltZyk7CiAgfQp9IC8vIOW4jOacm++8jOiwg+eUqOivpeWHveaVsO+8jOWwseWPr+S7peiuvue9rumCo+S6m+WQiOmAgueahOWbvueJhwoKCmZ1bmN0aW9uIHNldEltYWdlcygpIHsKICBmb3IgKGNvbnN0IGltZyBvZiBpbWdzKSB7CiAgICAvLyDlpITnkIbor6Xlm77niYcKICAgIHNldEltYWdlKGltZyk7CiAgfQp9CgpmdW5jdGlvbiBoYW5kbGVTY3JvbGwoKSB7CiAgc2V0SW1hZ2VzKCk7Cn0KCmV2ZW50QnVzLiRvbigibWFpblNjcm9sbCIsIGRlYm91bmNlKGhhbmRsZVNjcm9sbCwgNTApKTsKZXhwb3J0IGRlZmF1bHQgewogIGluc2VydGVkKGVsLCBiaW5kaW5ncykgewogICAgY29uc3QgaW1nID0gewogICAgICBkb206IGVsLAogICAgICBzcmM6IGJpbmRpbmdzLnZhbHVlCiAgICB9OwogICAgaW1ncy5wdXNoKGltZyk7IC8vIOeri+WNs+WkhOeQhuWugwoKICAgIHNldEltYWdlKGltZyk7CiAgfSwKCiAgdW5iaW5kKGVsKSB7CiAgICBpbWdzID0gaW1ncy5maWx0ZXIoaW1nID0+IGltZy5kb20gIT09IGVsKTsKICB9Cgp9Ow=="},{"version":3,"sources":["/Users/jixinyan/Desktop/前端/DuYi-Vue2/1. 入门/39. 打包结果分析/课堂代码/my-site/src/directives/lazy.js"],"names":["eventBus","debounce","defaultGif","imgs","setImage","img","dom","src","clientHeight","document","documentElement","rect","getBoundingClientRect","height","top","filter","i","setImages","handleScroll","$on","inserted","el","bindings","value","push","unbind"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,YAArB;AACA,SAASC,QAAT,QAAyB,SAAzB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AAEA,IAAIC,IAAI,GAAG,EAAX;;AAEA,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACrBA,EAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,GAAcL,UAAd,CADqB,CACK;AAC1B;AACA;;AACA,QAAMM,YAAY,GAAGC,QAAQ,CAACC,eAAT,CAAyBF,YAA9C;AACA,QAAMG,IAAI,GAAGN,GAAG,CAACC,GAAJ,CAAQM,qBAAR,EAAb;AACA,QAAMC,MAAM,GAAGF,IAAI,CAACE,MAAL,IAAe,GAA9B;;AACA,MAAIF,IAAI,CAACG,GAAL,IAAY,CAACD,MAAb,IAAuBF,IAAI,CAACG,GAAL,IAAYN,YAAvC,EAAqD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACAH,IAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,GAAcF,GAAG,CAACE,GAAlB;AACAJ,IAAAA,IAAI,GAAGA,IAAI,CAACY,MAAL,CAAaC,CAAD,IAAOA,CAAC,KAAKX,GAAzB,CAAP;AACD;AACF,C,CAED;;;AACA,SAASY,SAAT,GAAqB;AACnB,OAAK,MAAMZ,GAAX,IAAkBF,IAAlB,EAAwB;AACtB;AACAC,IAAAA,QAAQ,CAACC,GAAD,CAAR;AACD;AACF;;AAED,SAASa,YAAT,GAAwB;AACtBD,EAAAA,SAAS;AACV;;AAEDjB,QAAQ,CAACmB,GAAT,CAAa,YAAb,EAA2BlB,QAAQ,CAACiB,YAAD,EAAe,EAAf,CAAnC;AAEA,eAAe;AACbE,EAAAA,QAAQ,CAACC,EAAD,EAAKC,QAAL,EAAe;AACrB,UAAMjB,GAAG,GAAG;AACVC,MAAAA,GAAG,EAAEe,EADK;AAEVd,MAAAA,GAAG,EAAEe,QAAQ,CAACC;AAFJ,KAAZ;AAIApB,IAAAA,IAAI,CAACqB,IAAL,CAAUnB,GAAV,EALqB,CAMrB;;AACAD,IAAAA,QAAQ,CAACC,GAAD,CAAR;AACD,GATY;;AAUboB,EAAAA,MAAM,CAACJ,EAAD,EAAK;AACTlB,IAAAA,IAAI,GAAGA,IAAI,CAACY,MAAL,CAAaV,GAAD,IAASA,GAAG,CAACC,GAAJ,KAAYe,EAAjC,CAAP;AACD;;AAZY,CAAf","sourcesContent":["import eventBus from \"@/eventBus\";\nimport { debounce } from \"@/utils\";\nimport defaultGif from \"@/assets/default.gif\";\n\nlet imgs = [];\n\nfunction setImage(img) {\n  img.dom.src = defaultGif; // 先暂时使用着默认图片\n  // 处理图片\n  // 该图片是否在视口范围内\n  const clientHeight = document.documentElement.clientHeight;\n  const rect = img.dom.getBoundingClientRect();\n  const height = rect.height || 150;\n  if (rect.top >= -height && rect.top <= clientHeight) {\n    // 在视口范围内\n    // const tempImg = new Image();\n    // tempImg.onload = function() {\n    //   // 当真实图片加载完成之后\n    //   img.dom.src = img.src;\n    // };\n    // tempImg.src = img.src;\n    img.dom.src = img.src;\n    imgs = imgs.filter((i) => i !== img);\n  }\n}\n\n// 希望，调用该函数，就可以设置那些合适的图片\nfunction setImages() {\n  for (const img of imgs) {\n    // 处理该图片\n    setImage(img);\n  }\n}\n\nfunction handleScroll() {\n  setImages();\n}\n\neventBus.$on(\"mainScroll\", debounce(handleScroll, 50));\n\nexport default {\n  inserted(el, bindings) {\n    const img = {\n      dom: el,\n      src: bindings.value,\n    };\n    imgs.push(img);\n    // 立即处理它\n    setImage(img);\n  },\n  unbind(el) {\n    imgs = imgs.filter((img) => img.dom !== el);\n  },\n};\n"]}]}